// https://docs.renovatebot.com/configuration-options/

// see https://github.com/renovatebot/renovate/discussions/29786#discussioncomment-9836492
{
    "$schema": "https://docs.renovatebot.com/renovate-schema.json",

    "packageRules": [
        {
            "enabled": false,
            "matchDepTypes": ["required_version"],
            "matchPackageNames": ["hashicorp/terraform"]
        },
        {
            "matchDatasources": ["terraform-provider", "terraform-module"],
            "registryUrls": ["https://registry.opentofu.org"],
            "semanticCommitType": "chore"
        }
    ],

    "customManagers": [
        {
            "customType": "regex",
            "datasourceTemplate": "github-releases",
            "packageNameTemplate": "opentofu/opentofu",
            "depNameTemplate": "opentofu",
            "description": "Update opentofu version at 'required_version' in versions.tf files",
            "managerFilePatterns": [
                "(^|/)versions.tf$/"
            ],
            "matchStrings": [
                "required_version\\s=\\s\"(?<currentValue>.+)\""
            ]
        }
    ]
}
